.navbar.navbar-light.fixed-top.navbar-expand-md
  a.navbar-brand(href='/')
    i.fas.fa-cube
    | Hacker Matcher
  button.navbar-toggler(type='button', data-toggle='collapse', data-target='.navbar-collapse')
    span.sr-only Toggle navigation
    span.navbar-toggler-icon
  .collapse.navbar-collapse
    if !user
      ul.nav.navbar-nav
        li.active.nav-item
          .search-container
              button
                i.fa.fa-search
              <input type="text" name="typeahead" class="typeahead tt-query" autocomplete="off" spellcheck="false" placeholder="Type your Query">
        li.active.nav-item(class=(title === 'Home') ? 'active' : undefined)
          a.nav-link(href='/') Home
    
    ul.nav.navbar-nav.ml-auto
      if !user
        li.nav-item(class=(title === 'Login') ? 'active' : undefined)
          a.nav-link(href='/login') Login
        li.nav-item(class=(title === 'Create Account') ? 'active' : undefined)
          a.nav-link(href='/signup') Create Account
      else
        li.dropdown(class=(title === 'Account Management') ? 'active' : undefined).nav-item
          a.dropdown-toggle.nav-link(href='#', data-toggle='dropdown')
            if user.picture
              img(src=user.picture)
            else
              img(src=user.gravatar(60))
            span= user.name || user.email || user.id
            i.caret
          ul.dropdown-menu
            li.dropdown-item
              a(href='/account') My Account
            li.divider.dropdown-item
            li.dropdown-item
              a(href='/logout') Logout
script.
  // Instantiate the Bloodhound suggestion engine
  var movies = new Bloodhound({
      datumTokenizer: function (datum) {
          return Bloodhound.tokenizers.whitespace(datum.value);
      },
      queryTokenizer: Bloodhound.tokenizers.whitespace,
      remote: {
          url: '/search?key=%QUERY',
          filter: function (movies) {
              console.log(movies)
              // Map the remote source JSON array to a JavaScript object array
              return $.map(movies, function (movie) {
                  return {
                      value: movie.name
                  };
              });
          }
      }
  });

  // Initialize the Bloodhound suggestion engine
  movies.initialize();

  // Instantiate the Typeahead UI
  $('.typeahead').typeahead(null, {
      displayKey: 'value',
      source: movies.ttAdapter()
  });



  